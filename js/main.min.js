var dm={init:function(a){this.username=a,this.url="http://api.dailymile.com/people/"+this.username+"/entries.json",this.container=$("#dailymile"),this.getEntries()},getEntries:function(){$.ajax({url:this.url,dataType:"jsonp",success:function(a){var b=a.entries;dm.insertEntries(b)},error:function(){}})},removeLoading:function(){var a=this.container.find(".loading");a.remove()},toPaddedString:function(a){return 10>a&&(a="0"+a),a},insertEntries:function(a){this.removeLoading();var b=[];b.push('<ul class="dm-entries">'),$(a).each(function(a,c){var d=c.workout,e=c.url,f=new Date(c.at);if(d&&"Running"==d.activity_type&&d.distance){var g=d.title,h=f.getDate(),i=f.getMonth()+1,j=f.getFullYear(),k=dm.toPaddedString(h)+"."+dm.toPaddedString(i)+"."+j,l=d.distance,m=l.value,n="kilometers"==l.units?"km":"miles",o=m.toFixed(1)+" "+n,p=50,q=m/p*100;b.push('<li class="dm-entry">'),b.push('<a href="'+e+'">'),b.push('<h3 class="dm-entry-title">'+k+" &middot; "+g+"</h3>"),b.push('<p class="progress">'),b.push('<span class="progress-bar" style="width: '+q+'%"></span>'),b.push('<em class="dm-entry-distance">'+o+"</em>"),b.push("</p>"),b.push("</a>"),b.push("</li>")}}),b.push("</ul>"),b=b.join(""),this.container.append(b),this.insertMoreLink(this.username)},insertMoreLink:function(a){this.container.append($('<p class="more"><a href="http://www.dailymile.com/people/'+a+'">more</a></p>'))}};$(document).ready(function(){dm.init("ChristianF")});